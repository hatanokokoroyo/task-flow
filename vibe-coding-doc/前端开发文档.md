# Task Flow 前端开发文档

## 1. 技术栈选型
根据项目需求，前端采用以下技术栈：
- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **状态管理**: Pinia (处理工作项数据缓存、全局 UI 状态)
- **路由**: Vue Router
- **样式**: Tailwind CSS (原子化 CSS)
- **图标**: Lucide Vue (轻量级图标库)
- **辅助组件**: Headless UI (无样式可访问组件，用于下拉菜单、对话框等)
- **网络请求**: Axios
- **包管理**: pnpm

---

## 2. 前端开发规范

### 2.1 命名规范
- **目录命名**: 采用 `kebab-case` (如 `components/work-item`)。
- **文件命名**: 
  - Vue 组件: `PascalCase.vue` (如 `WorkItemList.vue`)。
  - JavaScript 文件: `kebab-case.ts` (如 `use-work-item.ts`)。
- **变量与函数**: `camelCase` (如 `fetchWorkItems`, `isModalOpen`)。
- **常量**: `SNAKE_UPPER_CASE` (如 `MAX_TITLE_LENGTH`)。
- **CSS 类名**: 遵循 Tailwind CSS 规范，自定义类使用 `kebab-case`。

### 2.2 编码准则
- **组件拆分**: 遵循单一职责原则，复杂的页面逻辑拆分为多个子组件。
- **组合式函数 (Composables)**: 提取通用的业务逻辑（如分页、表单校验、API 调用）。
- **Props 与 Events**: 
  - Props 命名必须清晰，使用 `camelCase`。
  - 事件发送统一使用 `emit('event-name', data)`。
- 定义接口（Interfaces）来约束 API 返回的数据结构。

---

## 3. 项目目录设计

```text
frontend/
├── public/                 # 静态资源
├── src/
│   ├── assets/             # 样式、图片、字体
│   │   ├── css/            # 全局样式 (Tailwind 指令)
│   │   └── images/
│   ├── components/         # 公共组件
│   │   ├── common/         # 基础组件 (Button, Input, Modal, Tag)
│   │   ├── layout/         # 布局组件 (Sidebar, Header)
│   │   └── business/       # 业务组件 (WorkItemCard, CommentList, LogTimeline)
│   ├── composables/        # 组合式函数 (逻辑提取)
│   ├── router/             # 路由配置
│   ├── services/           # API 请求封装 (Axios 实例与接口)
│   │   ├── api.js          # 基础请求配置
│   │   └── work-item.js    # 工作项相关 API
│   ├── stores/             # Pinia 状态管理
│   │   ├── work-item.js    # 工作项数据存储
│   │   └── ui.js           # 全局 UI 状态 (主题、侧边栏收起等)
│   ├── views/              # 页面级组件
│   │   ├── Dashboard.vue   # 工作项列表页
│   │   ├── DailyLog.vue    # 按天日志页
│   │   └── RecycleBin.vue  # 回收站页
│   ├── utils/              # 工具函数 (日期格式化、文本处理)
│   ├── App.vue             # 根组件
│   └── main.js             # 入口文件
├── index.html
├── tailwind.config.js      # Tailwind 配置
├── vite.config.js          # Vite 配置
└── package.json
```

---

## 4. 组件封装设计

### 4.1 基础组件 (Common)
- **`StatusTag.vue`**: 根据状态（待处理、设计中等）显示不同的背景色和文字颜色。
- **`BaseModal.vue`**: 基于 Headless UI 封装的通用弹窗。
- **`BaseInput.vue / BaseButton.vue`**: 符合样式的统一表单控件。

### 4.2 业务组件 (Business)
- **`WorkItemCard.vue`**: 展示工作项概览信息，包括标题、状态、进度条。
- **`WorkItemDetail.vue`**: 侧边抽屉或弹窗，展示详情、子任务及评论。
- **`CommentArea.vue`**: 包含评论列表和添加评论的输入框。
- **`SubItemTree.vue`**: 递归展示子工作项的树形结构。

### 4.3 布局组件 (Layout)
- **`AppSidebar.vue`**: 侧边导航栏。
- **`AppHeader.vue`**: 顶部搜索栏与操作按钮。

---

## 5. CSS 风格标准

### 5.1 核心色值 (参考原型)
| 状态/用途 | 背景色 (Tailwind) | 文字颜色 (Tailwind) | 备注 |
| :--- | :--- | :--- | :--- |
| 待处理 | `bg-gray-100` | `text-gray-700` | 灰色 |
| 设计中 | `bg-blue-100` | `text-blue-800` | 蓝色 |
| 开发中 | `bg-green-100` | `text-green-800` | 绿色 |
| 测试中 | `bg-yellow-100` | `text-yellow-800` | 黄色 |
| 交付中 | `bg-orange-100` | `text-orange-800` | 橙色 |
| 已完成 | `bg-emerald-100` | `text-emerald-800` | 深绿色 |
| 侧边栏选中 | `bg-blue-50` | `text-blue-600` | |

### 5.2 布局规范
- **主布局**: `flex h-screen overflow-hidden`。
- **内容区**: `flex-1 overflow-y-auto p-6 bg-gray-50`。
- **字体**: `Inter` 搭配 `PingFang SC`，默认字号 `text-sm` (14px)。
- **阴影**: 卡片使用 `shadow-sm`，弹窗使用 `shadow-lg`。

---

## 6. 数据交互规范
- 所有 API 请求统一放在 `services/` 目录下。
- 使用 Axios 拦截器处理全局错误和 200/5000 字符限制的前端校验。
- 数据刷新策略：创建/更新操作成功后，调用 Pinia Store 中的 Action 重新获取列表数据。
