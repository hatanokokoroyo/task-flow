# Task Flow 项目说明

## 快速参考

本文档为 Task Flow 项目的总体说明，用于在新对话中快速理解项目上下文。

### 项目定位
轻量级个人工作日志管理系统，支持本地部署和服务器部署。

### 核心功能
1. **工作项管理** - 创建/编辑/删除工作项，支持6种状态
2. **子工作项** - 支持3级嵌套的树形结构
3. **评论管理** - 在工作项下添加评论
4. **日志查看** - 按日期查看操作历史，支持日历视图
5. **回收站** - 软删除，7天自动清理

### 技术栈选择

| 层级 | 技术 | 说明 |
|------|------|------|
| 前端 | Vue 3 + TypeScript + Vite + Pinia + TailwindCSS | 现代化前端技术栈 |
| 后端 | Node.js + Express + TypeScript | 简单易维护 |
| 数据库 | SQLite + Prisma | 轻量级，单文件数据库 |
| 部署 | Docker | 容器化部署 |

### 项目结构
```
task-flow/
├── packages/
│   ├── client/      # Vue 3 前端
│   └── server/      # Express 后端
├── docker/          # Docker 配置
└── vibe-coding-doc/ # 项目文档
```

### 相关文档

| 文档 | 说明 |
|------|------|
| [需求说明.md](需求说明.md) | 详细功能需求定义 |
| [技术方案.md](技术方案.md) | 技术栈、数据库设计、API 设计 |
| [开发指南.md](开发指南.md) | 代码模板、开发步骤 |

---

## 新对话使用指南

在新对话中开始开发时，请按以下步骤操作：

### 1. 提供上下文

```
请阅读以下文档，然后按照开发任务清单执行代码生成：
- vibe-coding-doc/需求说明.md
- vibe-coding-doc/技术方案.md
- vibe-coding-doc/开发指南.md
```

### 2. 按阶段执行

建议每次对话专注于一个阶段的任务：

**对话1 - 项目初始化：**
```
根据技术方案和开发指南，执行"阶段一：项目初始化"的所有任务。
```

**对话2 - 后端开发：**
```
根据技术方案和开发指南，执行"阶段二：后端 API 开发"的所有任务。
```

**对话3 - 前端基础：**
```
根据技术方案和开发指南，执行"阶段三：前端基础开发"的所有任务。
```

**对话4 - 前端页面：**
```
根据技术方案和开发指南，执行"阶段四：前端页面开发"的所有任务。
```

**对话5 - 部署配置：**
```
根据技术方案和开发指南，执行"阶段五：部署配置"的所有任务。
```

### 3. 验证命令

每个阶段完成后，使用以下命令验证：

```bash
# 安装依赖
pnpm install

# 初始化数据库（阶段一后）
pnpm --filter server prisma:migrate

# 启动后端（阶段二后）
pnpm --filter server dev

# 启动前端（阶段三后）
pnpm --filter client dev

# 完整启动（阶段四后）
pnpm dev
```

---

## 状态枚举快速参考

| 值 | 标签 | 描述 |
|----|------|------|
| pending | 待处理 | 新建的工作项 |
| design | 设计中 | 正在设计阶段 |
| develop | 开发中 | 正在开发实现 |
| test | 测试中 | 正在测试验证 |
| delivery | 交付中 | 准备交付或发布 |
| done | 已完成 | 工作项完成 |

## API 端点快速参考

### 工作项
- `GET /api/v1/work-items` - 列表
- `GET /api/v1/work-items/:id` - 详情
- `POST /api/v1/work-items` - 创建
- `PUT /api/v1/work-items/:id` - 更新
- `DELETE /api/v1/work-items/:id` - 软删除
- `POST /api/v1/work-items/:id/restore` - 恢复
- `DELETE /api/v1/work-items/:id/permanent` - 彻底删除

### 评论
- `POST /api/v1/work-items/:id/comments` - 添加
- `PUT /api/v1/comments/:id` - 编辑
- `DELETE /api/v1/comments/:id` - 删除

### 日志
- `GET /api/v1/activity-logs` - 列表
- `GET /api/v1/activity-logs/calendar` - 日历数据

### 其他
- `GET /api/v1/stats` - 统计
- `GET /api/v1/recycle-bin` - 回收站列表
- `DELETE /api/v1/recycle-bin` - 清空回收站

## 前端页面快速参考

| 路径 | 页面 | 核心功能 |
|------|------|----------|
| `/` | 工作项列表 | 统计、搜索、筛选、CRUD |
| `/work-item/:id` | 工作项详情 | 子项管理、评论、状态变更 |
| `/daily-log` | 日志查看 | 日历、筛选、导出 |
| `/recycle-bin` | 回收站 | 恢复、彻底删除、清空 |
