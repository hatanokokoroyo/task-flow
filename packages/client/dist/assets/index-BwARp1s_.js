import{K as A,r as d,j as f,d as T,o as v,c as w,b as B,D as F,n as G,m as K,T as O,f as x,g as h,p as i,a as m,t as g,h as _,E as U}from"./index-Dkm5N9GV.js";import{a as r,b as q}from"./Toast-1D9_cmOs.js";function H(e){return r.get("/work-items",{params:e})}function J(e){return r.get(`/work-items/${e}`)}function L(e){return r.post("/work-items",e)}function M(e,n){return r.put(`/work-items/${e}`,n)}function P(e){return r.delete(`/work-items/${e}`)}function Q(e){return r.post(`/work-items/${e}/restore`)}function X(e){return r.delete(`/work-items/${e}/permanent`)}function Y(){return r.get("/stats")}function ue(){return r.get("/recycle-bin")}function de(){return r.delete("/recycle-bin")}const fe=A("workItem",()=>{const e=d([]),n=d(null),a=d(!1),s=d({total:0,pending:0,inProgress:0,done:0,recycled:0}),o=f(()=>e.value.filter(t=>t.status==="pending")),p=f(()=>e.value.filter(t=>["design","develop","test","delivery"].includes(t.status))),I=f(()=>e.value.filter(t=>t.status==="done"));async function S(t){a.value=!0;try{e.value=await H(t)}finally{a.value=!1}}async function z(t){a.value=!0;try{n.value=await J(t)}finally{a.value=!1}}async function D(t){const u=await L(t);return e.value.unshift(u),await c(),u}async function N(t,u){var C;const k=await M(t,u),y=e.value.findIndex(R=>R.id===t);return y!==-1&&(e.value[y]={...e.value[y],...k}),((C=n.value)==null?void 0:C.id)===t&&(n.value={...n.value,...k}),await c(),k}async function j(t){await P(t),e.value=e.value.filter(u=>u.id!==t),await c()}async function V(t){await Q(t),await c()}async function E(t){await X(t),await c()}async function c(){s.value=await Y()}return{items:e,currentItem:n,loading:a,stats:s,pendingItems:o,inProgressItems:p,doneItems:I,fetchWorkItems:S,fetchWorkItem:z,createWorkItem:D,updateWorkItem:N,deleteWorkItem:j,restoreWorkItem:V,permanentDeleteWorkItem:E,fetchStats:c}}),b=d(!1),W=d({message:""});let l=null;function Z(){function e(s){return W.value={title:s.title||"确认",message:s.message,confirmText:s.confirmText||"确认",cancelText:s.cancelText||"取消",type:s.type||"info"},b.value=!0,new Promise(o=>{l=o})}function n(){b.value=!1,l==null||l(!0),l=null}function a(){b.value=!1,l==null||l(!1),l=null}return{visible:b,options:W,confirm:e,handleConfirm:n,handleCancel:a}}const ee=["type","disabled"],te={key:0,class:"animate-spin"},$=T({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},type:{default:"button"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(e){const n=e,a=f(()=>({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"})[n.size]),s=f(()=>({primary:"bg-primary text-white hover:bg-primary-600 active:bg-primary-700",secondary:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600 active:bg-slate-300 dark:active:bg-slate-500",danger:"bg-red-500 text-white hover:bg-red-600 active:bg-red-700",ghost:"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 active:bg-slate-200 dark:active:bg-slate-600"})[n.variant]);return(o,p)=>(v(),w("button",{type:e.type,disabled:e.disabled||e.loading,class:G(["inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all",a.value,s.value,{"opacity-50 cursor-not-allowed":e.disabled||e.loading}])},[e.loading?(v(),w("span",te,"⟳")):B("",!0),F(o.$slots,"default")],10,ee))}}),ae={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ne={class:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-md p-6"},se={class:"text-lg font-semibold mb-2 text-slate-900 dark:text-white"},re={class:"text-slate-600 dark:text-slate-400 mb-6"},oe={class:"flex justify-end gap-3"},le=T({__name:"ConfirmDialog",setup(e){const{visible:n,options:a,handleConfirm:s,handleCancel:o}=Z();return(p,I)=>(v(),K(O,{to:"body"},[x(U,{name:"confirm"},{default:h(()=>[i(n)?(v(),w("div",ae,[m("div",ne,[m("h3",se,g(i(a).title),1),m("p",re,g(i(a).message),1),m("div",oe,[x($,{variant:"secondary",onClick:i(o)},{default:h(()=>[_(g(i(a).cancelText),1)]),_:1},8,["onClick"]),x($,{variant:i(a).type==="danger"?"danger":"primary",onClick:i(s)},{default:h(()=>[_(g(i(a).confirmText),1)]),_:1},8,["variant","onClick"])])])])):B("",!0)]),_:1})]))}}),me=q(le,[["__scopeId","data-v-312e4429"]]),ge={pending:{label:"待处理",color:"#6b7280",bgColor:"rgba(156, 163, 175, 0.15)"},design:{label:"设计中",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)"},develop:{label:"开发中",color:"#10b981",bgColor:"rgba(16, 185, 129, 0.15)"},test:{label:"测试中",color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)"},delivery:{label:"交付中",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)"},done:{label:"已完成",color:"#16a34a",bgColor:"rgba(34, 197, 94, 0.15)"}};export{me as C,ge as S,$ as _,fe as a,Z as b,L as c,P as d,ue as e,de as f,J as g,M as u};
