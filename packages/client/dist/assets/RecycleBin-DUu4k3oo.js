import{_ as S,u as R,T as $,d as y}from"./Toast-1D9_cmOs.js";import{S as N,a as j,e as A,_,f as I,b as M,C as V}from"./index-BwARp1s_.js";import{d as w,o as r,c as l,t as c,i as Y,j as z,k as F,m as k,g as m,r as v,a as t,h as p,b as W,F as H,x as E,f as i}from"./index-Dkm5N9GV.js";const G=w({__name:"StatusTag",props:{status:{}},setup(g){const d=g,a=z(()=>N[d.status]);return(f,o)=>(r(),l("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:Y({color:a.value.color,backgroundColor:a.value.bgColor})},c(a.value.label),5))}}),L={class:"max-w-7xl mx-auto"},O={class:"flex items-center justify-between mb-6"},P={class:"text-slate-600 dark:text-slate-400"},U={key:0,class:"text-center py-12 text-slate-400 dark:text-slate-500"},q={key:1,class:"text-center py-12 text-slate-400 dark:text-slate-500"},J={key:2,class:"space-y-4"},K={class:"font-semibold text-slate-800 dark:text-white mb-1"},Q={class:"flex items-center gap-4 text-sm text-slate-400 dark:text-slate-500"},X={class:"text-red-500"},Z={class:"flex items-center gap-2"},ae=w({__name:"RecycleBin",setup(g){const d=j(),a=R(),{confirm:f}=M(),o=v([]),x=v(!1);F(async()=>{await u()});async function u(){x.value=!0;try{o.value=await A()}catch(s){a.error(s.message||"åŠ è½½å¤±è´¥")}finally{x.value=!1}}function b(s){return y(s).format("YYYY-MM-DD HH:mm")}function h(s){return Math.max(0,y(s).diff(y(),"day"))}async function C(s){try{await d.restoreWorkItem(s.id),a.success("æ¢å¤æˆåŠŸ"),await u()}catch(e){a.error(e.message||"æ¢å¤å¤±è´¥")}}async function T(s){if(await f({title:"å½»åº•åˆ é™¤",message:`ç¡®å®šè¦å½»åº•åˆ é™¤"${s.title}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`,type:"danger",confirmText:"å½»åº•åˆ é™¤"}))try{await d.permanentDeleteWorkItem(s.id),a.success("å·²å½»åº•åˆ é™¤"),await u()}catch(n){a.error(n.message||"åˆ é™¤å¤±è´¥")}}async function B(){if(await f({title:"æ¸…ç©ºå›æ”¶ç«™",message:"ç¡®å®šè¦æ¸…ç©ºå›æ”¶ç«™å—ï¼Ÿæ‰€æœ‰å·¥ä½œé¡¹å°†è¢«å½»åº•åˆ é™¤ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤ï¼",type:"danger",confirmText:"æ¸…ç©º"}))try{await I(),a.success("å›æ”¶ç«™å·²æ¸…ç©º"),await u()}catch(e){a.error(e.message||"æ¸…ç©ºå¤±è´¥")}}return(s,e)=>(r(),k(S,{title:"å›æ”¶ç«™"},{default:m(()=>[t("div",L,[e[3]||(e[3]=t("div",{class:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 mb-6"},[t("div",{class:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200"},[t("span",null,"âš ï¸"),t("span",null,"å›æ”¶ç«™ä¸­çš„å·¥ä½œé¡¹å°†åœ¨åˆ é™¤å 7 å¤©è‡ªåŠ¨å½»åº•åˆ é™¤")])],-1)),t("div",O,[t("div",P," å…± "+c(o.value.length)+" ä¸ªå·¥ä½œé¡¹ ",1),o.value.length>0?(r(),k(_,{key:0,variant:"danger",onClick:B},{default:m(()=>[...e[0]||(e[0]=[p(" ğŸ—‘ï¸ æ¸…ç©ºå›æ”¶ç«™ ",-1)])]),_:1})):W("",!0)]),x.value?(r(),l("div",U," åŠ è½½ä¸­... ")):o.value.length===0?(r(),l("div",q," å›æ”¶ç«™æ˜¯ç©ºçš„ ")):(r(),l("div",J,[(r(!0),l(H,null,E(o.value,n=>(r(),l("div",{key:n.id,class:"bg-white dark:bg-slate-800 rounded-xl p-5 shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-between"},[t("div",null,[t("h3",K,c(n.title),1),t("div",Q,[i(G,{status:n.status},null,8,["status"]),t("span",null,"åˆ é™¤äºï¼š"+c(b(n.deletedAt)),1),t("span",X,c(h(n.expiresAt))+" å¤©åå½»åº•åˆ é™¤",1)])]),t("div",Z,[i(_,{size:"sm",variant:"secondary",onClick:D=>C(n)},{default:m(()=>[...e[1]||(e[1]=[p(" â™»ï¸ æ¢å¤ ",-1)])]),_:1},8,["onClick"]),i(_,{size:"sm",variant:"danger",onClick:D=>T(n)},{default:m(()=>[...e[2]||(e[2]=[p(" ğŸ—‘ï¸ å½»åº•åˆ é™¤ ",-1)])]),_:1},8,["onClick"])])]))),128))]))]),i($),i(V)]),_:1}))}});export{ae as default};
